<ion-navbar primary>
  <ion-title>整改任务({{tasks.length}}/{{allTasks.length}})</ion-title>
  <ion-buttons end>
    <button large (click)="presentPopover($event)" [disabled]="isLoading || allTasks.length == 0"> 
        <ion-icon name="more"></ion-icon>
      </button>
  </ion-buttons>  
</ion-navbar>
<ion-toolbar text-center class='condition-toolbar'>
  <div style="">{{condition.road}} , {{condition.direction}} , {{condition.dateOrder}} , {{condition.stakeOrder}}</div>
</ion-toolbar>
<!--<ion-toolbar primary>
  <ion-row>
    <ion-col width-50 no-padding1>
      <ion-item no-padding1>
        <ion-label>高速名称</ion-label>
        <ion-select [(ngModel)]="condition.road" (ionChange)="onRoadChange()"
        cancelText="取消" okText="确定" interface="action-sheet">
          <ion-option [value]="item.totalRouteName" *ngFor="let item of roads">{{item.totalRouteName}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-col>
    <ion-col width-50 no-padding1>
      <ion-item no-pading1>
        <ion-label>行车方向</ion-label>
        <ion-select [(ngModel)]="condition.direction" (ionChange)="onDirectionChange()" cancelText="取消" okText="确定" interface="action-sheet">
          <ion-option [value]="item.value" *ngFor="let item of directions">{{item.text}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-col>
  </ion-row>
</ion-toolbar>-->
<ion-content>
  <ion-refresher (ionRefresh)="query($event)">
    <ion-refresher-content pullingText="下拉刷新" refreshingText="查询整改复查记录..."></ion-refresher-content>
  </ion-refresher>
  <h3 [hidden]="tasks.length>0 || isLoading" text-center gray>没有整改复查记录!</h3>
  <ion-list>
    <ion-item *ngFor="let item of tasks let ix = index" style="padding-left:0" 
    [ngClass]="{'complete':item.zhenggaiWanchengStatus == '整改完成' , 'delay':item.zhenggaiWanchengStatus == '申请延期'}">
      <span item-left class="sn">{{ix+1}}.</span>
      <div>
        <strong class="caseid">{{item.caseID}}<span class='taskdate'>{{item.fangxiang}} / {{item.chedao}} / {{item.stakeNum}} / {{item.stakeOrder}}</span></strong><br>
        {{item.askFinishedDate ? item.askFinishedDate.split(" ")[0] : ""}}/{{item.orderTimer}}<span style='float:right'>{{item.caseCatalog}} / {{item.subCatalog}}</span>
        <div style='color:#999'>整改原因: {{item.zhengaiYuanyin}}</div>
      </div>
    </ion-item>
  </ion-list>
</ion-content>